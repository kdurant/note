# objdump 信息
* VMA: 段在虚拟地址中的位置
* LMA：段在加载地址中的位置
* File off： File offset，段的起始位置
* Algn：字节对齐方式，2\**2表示2的平方即为4，2**3表示2的3次方即为8

* .bss（Block Started by Symbol）通常是指用来存放程序中未初始化的全局变量和静态变量的一块内存区域
* .rdata$zzz, 编译器信息？
```
Contents of section .rdata$zzz:
 0000 4743433a 20286936 38362d70 6f736978  GCC: (i686-posix
 0010 2d647761 72662d72 6576302c 20427569  -dwarf-rev0, Bui
 0020 6c742062 79204d69 6e47572d 57363420  lt by MinGW-W64
 0030 70726f6a 65637429 20352e33 2e300000  project) 5.3.0..
```

* .eh_frame

# 空main函数
```c
int main(int argc, char*argv[])
{
    return 0;
}
```

```
D:\tmp>size main.o
   text    data     bss     dec     hex filename
    140       0       0     140      8c main.o

D:\tmp>objdump -h main.o

main.o:     file format pe-i386

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .text         00000014  00000000  00000000  000000dc  2**2
                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE
  1 .data         00000000  00000000  00000000  00000000  2**2
                  ALLOC, LOAD, DATA
  2 .bss          00000000  00000000  00000000  00000000  2**2
                  ALLOC
  3 .rdata$zzz    00000040  00000000  00000000  000000f0  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  4 .eh_frame     00000038  00000000  00000000  00000130  2**2
                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, DATA
```

# 添加初始化全局变量
```c
int g1 = 10;
int main(int argc, char*argv[])
{
    return 0;
}
```

```
D:\tmp>size main.o
   text    data     bss     dec     hex filename
    140       4       0     144      90 main.o

D:\tmp>objdump -h main.o

main.o:     file format pe-i386

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .text         00000014  00000000  00000000  000000dc  2**2
                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE
  1 .data         00000004  00000000  00000000  000000f0  2**2
                  CONTENTS, ALLOC, LOAD, DATA
  2 .bss          00000000  00000000  00000000  00000000  2**2
                  ALLOC
  3 .rdata$zzz    00000040  00000000  00000000  000000f4  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  4 .eh_frame     00000038  00000000  00000000  00000134  2**2
                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, DATA


```
初始化全局变量放到`.data`段

# 添加未初始化全局变量
```c
int g1 = 10;
int g2;
int main(int argc, char*argv[])
{
    return 0;
}
```

```
D:\tmp>size main.o
   text    data     bss     dec     hex filename
    140      24       0     164      a4 main.o

D:\tmp>objdump -h main.o

main.o:     file format pe-i386

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .text         00000014  00000000  00000000  00000104  2**2
                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE
  1 .data         00000004  00000000  00000000  00000118  2**2
                  CONTENTS, ALLOC, LOAD, DATA
  2 .bss          00000000  00000000  00000000  00000000  2**2
                  ALLOC
  3 .drectve      00000014  00000000  00000000  0000011c  2**2
                  CONTENTS, ALLOC, LOAD, DATA
  4 .rdata$zzz    00000040  00000000  00000000  00000130  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  5 .eh_frame     00000038  00000000  00000000  00000170  2**2
                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, DATA
```
相比上个测试，多了20个字节（和内存对齐有关?），放到`.drectve`段

# 添加初始化static变量
```c
int g1 = 10;
int g2;
int main(int argc, char*argv[])
{
    static int s1 = 20;
    return 0;
}
```

```
D:\tmp>size main.o
   text    data     bss     dec     hex filename
    140      28       0     168      a8 main.o

D:\tmp>objdump -h main.o

main.o:     file format pe-i386

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .text         00000014  00000000  00000000  00000104  2**2
                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE
  1 .data         00000008  00000000  00000000  00000118  2**2
                  CONTENTS, ALLOC, LOAD, DATA
  2 .bss          00000000  00000000  00000000  00000000  2**2
                  ALLOC
  3 .drectve      00000014  00000000  00000000  00000120  2**2
                  CONTENTS, ALLOC, LOAD, DATA
  4 .rdata$zzz    00000040  00000000  00000000  00000134  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  5 .eh_frame     00000038  00000000  00000000  00000174  2**2
                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, DATA
```

# 添加未初始化的static变量
```c
int g1 = 10;
int g2;
int main(int argc, char*argv[])
{
    static int s1 = 20;
    static int s2;
    return 0;
}
```
```
D:\tmp>size main.o
   text    data     bss     dec     hex filename
    140      28       4     172      ac main.o

D:\tmp>objdump -h main.o

main.o:     file format pe-i386

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .text         00000014  00000000  00000000  00000104  2**2
                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE
  1 .data         00000008  00000000  00000000  00000118  2**2
                  CONTENTS, ALLOC, LOAD, DATA
  2 .bss          00000004  00000000  00000000  00000000  2**2
                  ALLOC
  3 .drectve      00000014  00000000  00000000  00000120  2**2
                  CONTENTS, ALLOC, LOAD, DATA
  4 .rdata$zzz    00000040  00000000  00000000  00000134  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, DATA
  5 .eh_frame     00000038  00000000  00000000  00000174  2**2
                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, DATA
```
未初始化的static变量放到了`.bss`段
